
# Table of Contents



<div class="preview" id="org529b395">

</div>

Установленное для работы с djvu: djvulibre-bin — для разного, djview4 — смотрелка, didjvu — кодировалка.

В принципе, ещё есть возможность добавлять в djvu ocr-слой, есть ещё какие-то редакторы. Но у меня с этим пока не сложилось.

Djvusmooth — для редактирования метаданных в djvu. Не особо удобный интерфейс, возможно стоит поразбираться с тем, что там за ним.

Основных знакомых мне задач, кроме просмотра, три:

-   Сделать djvu из картинок.
-   Cделать единый файл из многих djvu.
-   Преобразование «непрямого» djvu в «связанный».

Преобразовать в одностраничники папку картинок. Didjvu.

    ls | grep jpg | xargs -I{} --max-args=1 --no-run-if-empty --verbose didjvu encode -o {}.djvu {}

Процесс не очень быстрый. Иногда бывает и чуть хитрее. Так я поворачивала страницы прямо перед конвертированием, используя [imagemagick](20220117164335-imagemagick.publ.md).

    for i in *.jpg; do
    convert $i -rotate 90 "./rotated/$i"
    didjvu encode  -o "./rotated/$i.djvu"  "./rotated/$i"
    done

Потом из готовых отдельных единый файл. Djvm из Djvulibre: 

    djvm -c doc.djvu *.jpg.djvu

Вставить в готовый «связанный» файл пропущенную страницу 143 (да, там загадочно было с нумерацией). Djvm из Djvulibre:

    djvm -i doc.djvu 00167.djvu 143

Многостраничный «связанный» из «непрямого». Djvmcvt из DjVuLibre:

    djvmcvt -b docin.djvu docout.djvu

-   docin.djvu здесь - индексный файл, который позволяет смотреть конвертируемый djvu как единую книгу.
-   docout.djvu - результат.

«Непрямой» из обычного «связанного» многостраничного (может пригодиться для выкладывания с целью просмотра из интернетов, чтоб люди грузили не всё целиком, а нужные страницы). Djvmcvt из DjVuLibre:

    djvmcvt -i docin.djvu dir index.djvu

-   docin.djvu здесь - многостраничный bundled djvu, который мы хотим сконвертировать
-   index.djvu - имя будущего индексного файла, который позволит смотреть всё как книгу.
-   dir - каталог, куда класть страницы indirect-ного djvu.

