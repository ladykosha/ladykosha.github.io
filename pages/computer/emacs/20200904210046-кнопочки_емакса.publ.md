
# Table of Contents

-   [Изучение привязок клавишей](#orga719dac)
    -   [Почему это не очень надо](#org6fd75a2)
-   [Кнопочки](#org89d6d14):info:
    -   [Как емакс помогает изучать себя?](#org3d5f217):info:
    -   [Основы основ](#orgec71318)
    -   [Перемещение в буфере](#org95089b3)
    -   [Дополнительно](#orga6e109a)
    -   [Запуск Emacs:](#org624adca)
    -   [Выход из Emacs:](#orge7184d2)
    -   [Обращение к меню (если мышь недоступна):](#orgd54efcd)
    -   [Прерывание операций:](#org2d92b6b)
    -   [Получение помощи:](#org4be9ecd)
    -   [Навигация по тексту:](#orgb099d6e)
    -   [Работа с файлами:](#org790688e)
    -   [Работа с каталогами:](#org6bdaff2)
    -   [Работа с буферами:](#org1555af8)
    -   [Работа с окнами:](#org392d247)
    -   [Набор текста:](#org18b89cc)
    -   [Удаление текста:](#org292ec85)
    -   [Работа со строками:](#org6728410)
    -   [Перестановка и преобразование текста:](#org0bb26bb)
    -   [Работа с областями:](#orgecab4b0)
    -   [Работа с прямоугольниками:](#org3c088d0)
    -   [Работа с регистрами:](#orgcbde593)
    -   [Работа с закладками:](#org51be262)
    -   [Поиск и замена:](#orga32438e)
    -   [Отмена:](#org311505e)
    -   [Повторить команду:](#orgf8f9d21)
    -   [Форматирование:](#org0a38b9e)
    -   [Проверка орфографии:](#org87e3ffd)
    -   [Работа с комментариями:](#org65e4170)
    -   [Работа с символами табуляции:](#org91fbfd1)
    -   [Работа с файлами тегов:](#org426ffa6)
    -   [Макрокоманды:](#org9f7b131)
    -   [Запуск внешних программ и надстроек:](#orgd4f166b)
    -   [Подсветка последних изменений:](#orga084b49)
    -   [Кодировки:](#org9ad23a6)
    -   [Работа с переменными:](#orga094932)
    -   [Настройка Emacs:](#orgb483bf4)
    -   [нумерация строк](#orgbf5bfb6)
-   [Про всякие символы](#orgb8c959a):info:
    -   [Про привязку всяких символов](#org4d19e44):info:
-   [Emacs: How to Define Keyboard Shortcuts](#org5fe0297):info:
    -   [Examples](#orgcf13a5e)
    -   [Keys To Avoid](#org22a0438)
    -   [Good Key Choices](#org97a009b)
    -   [Syntax Problem with Shift Key Combination](#orgc086665)
    -   [Order of Modifier Keys in Syntax](#orgd015012)
    -   [Common Questions](#org06294d2)
        -   [How to unset a keybinding?](#orgcb6f2a1)
        -   [How to find out the current keybinding to a key?](#orgef2572c)
        -   [How to find out the syntax for a particular key combination?](#org7db3665)
        -   [How to have a keyboard shortcut set only when a particular mode is active?](#orgf26b49b)
        -   [How to change major mode or minor mode's keys?](#org488751b)

<div class="preview" id="orgbbc64d1">

</div>

Собственно, подборка всякого.

-   <https://github.com/justbur/emacs-which-key> - подсказывалка кнопочек
-   unbound - describe-unbound-keys - наоборот, подсказывалка незанятого. (Если смотреть кнопочки на конкретный мод, не видит занятость на предыдущих этапах, эх)
-   <https://github.com/Fuco1/free-keys> - непробованное про свободные кнопочки, и там советуют заодно пакет, который показывает, как обстоят дела с занятыми.
-   <https://www.masteringemacs.org/article/mastering-key-bindings-emacs>
-   <https://www.gnu.org/software/emacs/manual/html_node/elisp/Key-Binding-Conventions.html>
-   C-t можно сделать своп двух предыдущих символов. Часто нужен при опечатках.
-   M-x which-key-show-top-level - посмотреть сочетания клавиш верхнего уровня
-   M-x tabify/untabify - возможность перевести весь код на отступы пробелами или табами через одну команду
-   Ctrl+x 8 Ctrl+h - уйма символов юникода.
    -   С-x 8 RET - юникодный символ по имени либо шестнадцатиричному коду. Либо then type “#10r” followed by the decimal codepoint. e.g. #10r8594
    -   <http://xahlee.info/emacs/emacs/emacs_n_unicode.html>


<a id="orga719dac"></a>

# Изучение привязок клавишей

-   <https://github.com/justbur/emacs-which-key>
-   counsel-descbinds. Perhaps that or the Helm version (helm-descbinds) is a good starting point?
-   If you use Icicles then you can see all key bindings as a forest, and you can navigate around that forest. See Icicles - Key Completion. (<https://www.emacswiki.org/emacs/Icicles_-_Key_Completion>)


<a id="org6fd75a2"></a>

## Почему это не очень надо

I have an orthogonal answer to the already good ones here. (like which-key)

I guess I have to ask why do you want to do this? Emacs is all about managing a large amount of semantics. That's why its context driven. I'm just saying I'd almost never do this (look for all the key bindings). I'd look for the semantic (a function name). I've been using Emacs since well before GNU. Several people have already suggested good answers to your question. For me, I suppose if you're doing it to acquire a dictionary of function / command names for capabilities used for a mode for example, then format isn't so important and that would be a reason to do it.

If I don't know the command for what I need to do, I'll use apropos and a semantic keyword looking for a capability. Read or search for a function name in the apropos buffer. Then where-is. If I want to use it as an 'interactive' command, and a function exists that is not interactive, then I'll fix that and put it in a convenient place (keymap).

And when something is buried in a keymap that I want to use more easily or it doesn't exist in the form I want, I've been known to write a helper elisp function if necessary and put it on a key where I want it. I add the missing semantic at the time I first encounter the need. The helper function ends up in .emacs (in my helper functions) and the new key binding is added appropriately (like a global or on a mode-hook, whatever). Example from long ago that I still use because it didn't exist at that time: a function I wrote 'read-file-under-point' and I put it on <f1>. It effectively does a find-file-other-window on the pathname found under point. Oh, I run shell's in Emacs so if I've 'grep -r' and found an interesting file to look at in some large program, then I can place the mouse over the pathname and <f1> &#x2026;

I still like to use tags as well. I don't like the xref (definitions) operation that superceded tags with Emacs 25. (note Emacs 27 is released) Mainly because of keymap changes I made long ago. Meta-. stems from long long ago (Symbolics Lisp Machine) and the keyboard on that machine had a special key for that because it was so important and frequently used. I put find-tag-other-window right next to that key and get-next-tag (for tags regexp searches) next to it on the other side. A semantic grouping for when you're jumping around in a very large "semantic set" aka huge program scattered among a large number of dirs/files.

So, the key bindings evolved as needed, starting from&#x2026; well, the Symbolics Machine (to the Sun workstation) and are based on **ergonomics** and semantics. Where do you have your Ctrl key on your keyboard for example? As Indiana Jones found out: "choose wisely". (repetitive stress injury could end up like the crumbling skeleton searching for "The Arc of the Key Binding")

<https://www.reddit.com/r/emacs/comments/ibhlbm/are_there_any_alternatives_to_ch_b_for_exploring/>


<a id="org89d6d14"></a>

# Кнопочки     :info:

Откуда-то практически цельнотыренное.


<a id="org3d5f217"></a>

## Как емакс помогает изучать себя?     :info:

-   ‘C-x ESC ESC’ повторить выполненную команду - перед нажатием ввода показывает имя команды RepeatLastCommand.
-   ‘C-h f’ (‘describe-function’) - выдаёт встроенную справку по функции, даёт ссылку на исходный код.
-   ‘C-h v’ (‘describe-variable’) - выдаёт встроенную справку по переменной
-   ‘C-h k’ - describe-key - позволяет узнать, какая команда выполняется по нажатию последовательности клавиш. Также работает для меню.
-   C-h b - describe-bindings - список привязок клавишей в окне
-   С-h m - describe-mode - список модов с описаниями и их клавишами, задействованных в окне.


<a id="orgec71318"></a>

## Основы основ

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Действие</th>
<th scope="col" class="org-left">Клавиатурная комбинация</th>
<th scope="col" class="org-left">Название функции</th>
</tr>
</thead>

<tbody>
<tr>
<td class="org-left">Создать/Открыть файл</td>
<td class="org-left">C-x C-f</td>
<td class="org-left">find-file</td>
</tr>


<tr>
<td class="org-left">Сохранить буфер в файл</td>
<td class="org-left">C-x C-s</td>
<td class="org-left">save-buffer</td>
</tr>


<tr>
<td class="org-left">Сохранить буфер под новым именем</td>
<td class="org-left">C-x C-w</td>
<td class="org-left">save-with-newname</td>
</tr>


<tr>
<td class="org-left">Сохранить все измененные буферы в их файлы</td>
<td class="org-left">C-x s</td>
<td class="org-left">save-some-buffers</td>
</tr>


<tr>
<td class="org-left">Переключиться в другой буфер</td>
<td class="org-left">C-x C-b</td>
<td class="org-left">switch-to-buffer</td>
</tr>


<tr>
<td class="org-left">Разделить окно редактирования и открыть другой буфер</td>
<td class="org-left">C-x 4 b</td>
<td class="org-left">switch-to-buffer-other-window</td>
</tr>


<tr>
<td class="org-left">Закрыть активный буфер</td>
<td class="org-left">C-x k</td>
<td class="org-left">kill-buffer</td>
</tr>


<tr>
<td class="org-left">Установить метку (начать выделять текст)</td>
<td class="org-left">C-&lt;Space&gt;</td>
<td class="org-left">set-mark-command</td>
</tr>


<tr>
<td class="org-left">Вырезать выделенный текст</td>
<td class="org-left">C-w</td>
<td class="org-left">kill-region</td>
</tr>


<tr>
<td class="org-left">Скопировать выделенный текст</td>
<td class="org-left">M-w</td>
<td class="org-left">copy-region-as-kill</td>
</tr>


<tr>
<td class="org-left">Вставить скопированный/вырезанный текст</td>
<td class="org-left">C-y</td>
<td class="org-left">yank</td>
</tr>


<tr>
<td class="org-left">Вставить скопированный/вырезанный ранее текст</td>
<td class="org-left">M-y</td>
<td class="org-left">yank-pop</td>
</tr>


<tr>
<td class="org-left">Разделить окно по горизонтали</td>
<td class="org-left">C-x 3</td>
<td class="org-left">split-window-horizontally</td>
</tr>


<tr>
<td class="org-left">Разделить окно по вертикали</td>
<td class="org-left">C-x 2</td>
<td class="org-left">split-window-vertically</td>
</tr>


<tr>
<td class="org-left">Оставить один буфер в окне</td>
<td class="org-left">C-x 1</td>
<td class="org-left">delete-other-windows</td>
</tr>


<tr>
<td class="org-left">Поиск текста с подсветкой всех найденных участков</td>
<td class="org-left">C-s</td>
<td class="org-left">isearch-forward</td>
</tr>


<tr>
<td class="org-left">Поиск назад, аналогично</td>
<td class="org-left">C-r</td>
<td class="org-left">isearch-backward</td>
</tr>


<tr>
<td class="org-left">Отменить последнюю операцию</td>
<td class="org-left">C-x u</td>
<td class="org-left">undo</td>
</tr>


<tr>
<td class="org-left">Выйти из минибуфера</td>
<td class="org-left">C-g</td>
<td class="org-left">keyboard-quit</td>
</tr>


<tr>
<td class="org-left">Закрыть Emacs</td>
<td class="org-left">C-x C-c</td>
<td class="org-left">save-buffers-kill-emacs</td>
</tr>
</tbody>
</table>


<a id="org95089b3"></a>

## Перемещение в буфере

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left">C-p</td>
<td class="org-left">Вверх на одну строку</td>
</tr>


<tr>
<td class="org-left">C-n</td>
<td class="org-left">Вниз на строку</td>
</tr>


<tr>
<td class="org-left">C-f</td>
<td class="org-left">Вперед на один символ</td>
</tr>


<tr>
<td class="org-left">C-b</td>
<td class="org-left">Назад на один символ</td>
</tr>


<tr>
<td class="org-left">C-a</td>
<td class="org-left">Начало строки</td>
</tr>


<tr>
<td class="org-left">C-e</td>
<td class="org-left">Конец строки</td>
</tr>


<tr>
<td class="org-left">C-v</td>
<td class="org-left">Вниз на одну страницу</td>
</tr>


<tr>
<td class="org-left">M-v</td>
<td class="org-left">Вверх на одну страницу</td>
</tr>


<tr>
<td class="org-left">M-f</td>
<td class="org-left">Вперед на одно слово</td>
</tr>


<tr>
<td class="org-left">M-b</td>
<td class="org-left">Назад на одно слово</td>
</tr>


<tr>
<td class="org-left">M-&lt;</td>
<td class="org-left">В начало буфера</td>
</tr>


<tr>
<td class="org-left">M-&gt;</td>
<td class="org-left">В конец буфера</td>
</tr>
</tbody>
</table>


<a id="orga6e109a"></a>

## Дополнительно

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Кнопочки</th>
<th scope="col" class="org-left">Название функции или действие</th>
</tr>
</thead>

<tbody>
<tr>
<td class="org-left">M-l</td>
<td class="org-left">downcase-word</td>
</tr>


<tr>
<td class="org-left">C-x C-l</td>
<td class="org-left">downcase-region</td>
</tr>


<tr>
<td class="org-left">M-u</td>
<td class="org-left">upcase-word</td>
</tr>


<tr>
<td class="org-left">C-x C-u</td>
<td class="org-left">upcase-region</td>
</tr>


<tr>
<td class="org-left">M-c</td>
<td class="org-left">capitalize-word</td>
</tr>


<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">capitalize-region</td>
</tr>


<tr>
<td class="org-left">C-x 5 0</td>
<td class="org-left">Удалить фрейм емакса - закрыть активное окно emacs</td>
</tr>


<tr>
<td class="org-left">C-@</td>
<td class="org-left">Установить границу выделенной области</td>
</tr>


<tr>
<td class="org-left">C-x v v</td>
<td class="org-left"><a href="../../20220101/20220218135815-vc_в_emacs.html#ID-2f1a78a1-1565-472a-a53d-9e2a6136ad46">Работа с системами контроля версий</a></td>
</tr>


<tr>
<td class="org-left">C-x C-f /sudo::/path/to/file</td>
<td class="org-left">Возможность открывать файлы через sudo в существующей сессии</td>
</tr>
</tbody>
</table>


<a id="org624adca"></a>

## Запуск Emacs:

-   emacs [имя\_файла] обычный запуск
-   emacs -nw [имя\_файла] запуск без GUI
-   emacsclient имя\_файла открытие файла в уже запущенном сервере Emacs (запуск сервера: M-x server-start)
-   C-x # - завершить работу с буфером, открытым через emacs-client


<a id="orge7184d2"></a>

## Выход из Emacs:

-   C-x C-c выйти из Emacs и сохранить все буферы
-   C-z перевести emacs в фоновый режим (свернуть GUI) (открутила)


<a id="orgd54efcd"></a>

## Обращение к меню (если мышь недоступна):

F10 или M-\` или M-x tmm-menubar (символ \` слева от кнопки `1` на моей клавиатуре)


<a id="org2d92b6b"></a>

## Прерывание операций:

-   C-g прервать операцию, выход из меню, выход из минибуфера, &#x2026;
-   ESC ESC ESC прерывание "рекурентных" команд


<a id="org4be9ecd"></a>

## Получение помощи:

-   C-h t открыть "Учебник Emacs" на родном языке
-   C-h C-h помощь по использованию справки
-   C-h h вывести файл "hello" на "всех" языках мира
-   C-h k описание ключа (комбинации клавиш)
-   C-h c назначение ключа (без подробного описания)
-   C-h m описание текущего режима
-   C-h b показать таблицу привязок ключей
-   C-h a поиск команды по регулярному выражению (apropos-command)
-   C-h f документация на функцию (команду) по имени
-   C-h p поиск пакета по ключу
-   C-h w поиск ключа (комбинации клавиш) по функции


<a id="orgb099d6e"></a>

## Навигация по тексту:

-   C-a или Home на начало строки
-   C-e или End на конец строки
-   C-b или Left на знак назад
-   C-f или Right на знак вперед
-   C-n или Down на стоку вниз
-   C-p или Up на строку вверх
-   M-f или C-Right на слово вперед
-   M-b или C-Left на слово назад
-   M-a в начало предложения
-   M-e в конец предложения
-   C-v или PgDn на страницу вниз (scroll-up)
-   M-v или PgUp на старницу вверх (scroll-down)
-   C-x < и C-x > горизонтальная прокрутка
-   C-l перерисовать изображение, поместить позицию курсора в центр
-   M-r курсор в начало центральной строки (текст не сдвигается)
-   M-< или C-Home в начало буфера (beginning-of-buffer) M-> или C-End в конец буфера (end-of-buffer)
-   M-g g или M-x goto-line переход на строку с заданным номером
-   M-x goto-char переход на заданную позицию в буфере
-   C-x = показать текущую позицию (срока, колонка, смещение, &#x2026;)
-   M-x what-page показать номер страницы
-   C-x l информация о странице (redraw-display)
-   C-x C-n установить целевой столбец
-   C-u C-x C-n отменить целевой столбец
-   C-u C-SPC вернуться на предыдущую позицию метки в буфере
-   C-x C-SPC вернуться на предыдущую глобальную позицию метки. Замечание: C-SPC эквиваленто C-@ (см. Работа с областями)
-   C-x \` перейти к следующей ошибке compile или результату grep


<a id="org790688e"></a>

## Работа с файлами:

-   C-x C-f открыть файл и создать буфер в том же окне
-   C-x C-v открыть файл в том же буфере
-   C-x 4 C-f открыть файл, создать буфер в новом окне
-   C-x C-r открыть файл в режиме "только чтение"
-   C-x C-s сохранить текущий буфер
-   C-x s сохранить все буферы с подтверждением
-   C-x C-w сохранить под другим именем
-   M-x delete-file удалить файл
-   M-x view-file просмотр файла
-   M-x insert-file вставить содержимое файла в буфер
-   M-~ забыть, что текущий буфер изменен
-   M-x emerge-&#x2026; объединение файлов/буферов&#x2026;


<a id="org6bdaff2"></a>

## Работа с каталогами:

-   C-x d открыть каталог в режиме Dired (но работает и C-x C-f)
-   C-x C-d список файлов в каталоге
-   C-u C-x C-d подробная распечатка каталога
-   M-x pwd показать текущий каталог
-   M-x cd сменить текущий каталог
-   M-x make-directory создать каталог
-   M-x delete-directory удалить каталог


<a id="org1555af8"></a>

## Работа с буферами:

-   C-x C-b список буферов
-   C-x b переход в буфер по имени (создание нового буфера)
-   C-x Left C-x Right переход по буферам (вперед/назад)
-   C-x k убить буфер (но сохранить окно)
-   C-x 40 убить буфер и закрыть окно
-   C-x C-q переключить доступ на запись в буфере


<a id="org392d247"></a>

## Работа с окнами:

-   C-x 0 закрыть окно (но не уничтожать буфер)
-   С-x 1 оставить одно окно ("zoom")
-   C-x 2 разделить окно по вертикали
-   C-x 3 разделить окно по горизонтали
-   C-x o переход в другое окно
-   C-x + "уровнять" размеры окон
-   C-x ^ или C-x - окно выше/ниже
-   C-x } или C-x { окно шире/уже
-   C-M-v листать другое окно (у меня :-( перехватывает KDE)
-   C-x 4 b выбрать буфер в другом окне


<a id="org18b89cc"></a>

## Набор текста:

-   C-q Вставка специальных символов (по восьмеричному коду или типа C-g)
-   C-j перевод строки (и обычно отступ)
-   С-\\ переключение метода ввода (раскладки)
-   C-x 4 a добавить запись в журнал изменений ChangeLog
-   M-( поставки скобки () и поставить курсор между ними
-   M-\\ автодополнение слова до ближайшего (dabbrev-expand)


<a id="org292ec85"></a>

## Удаление текста:

-   BSP удалить знак перед точкой (кто бы сомневался)
-   C-d или DEL удалить знак после точки
-   M-BSP удалить предыдущее слово
-   M-d удалить следующее слово
-   C-k удалить до конца строки
-   M-SPC удалить все пробелы и табуляции кроме одного пробела
-   C-x BSP удалить до начала предложения
-   M-k удалить до конца предложения
-   M-x overwrite-mode или INS переключение режима замены/вставки текста


<a id="org6728410"></a>

## Работа со строками:

-   C-o вставить одну или несколько пустых строк после курсора
    Пример:
    -   C-u 10 C-o вставить 10 строк после курсора
    -   M-4 C-o вставить 4 строки после курсора
    -   C-x C-o удалить все пустые строки кроме одной
-   M-^ объединить две строки (delete-indentation)
-   M-8 С-k удалить следующие 8 строки (8 для примера)
-   C-u 10 C-k удалить предыдущие 10 строк


<a id="org0bb26bb"></a>

## Перестановка и преобразование текста:

-   C-t переставить два знака
-   M-t переставить два слова
-   C-x C-t переставить две строки
-   M&#x2013; M-l последнее слово к нижнему регистру
-   M&#x2013; M-u последнее слово к верхнему регистру
-   M&#x2013; M-c последнее слово к нижнему регистру с заглавной


<a id="orgecab4b0"></a>

## Работа с областями:

-   M-x transient-mark-mode включить "подсветку" выделения

-   C-@ или C-SPC установить метку (set-mark-command)
-   С-x C-x поменять точку и метку местами (восстановить выделение)

-   M-@ или ESC-@ выделить до конца слова
-   M-h выделить абзац
-   C-x h выделить весь буфер
-   C-M-h выделить текущую функцию при редактировании исходников

-   C-w вырезать область в кольцевой карман
-   M-w скопировать область в кольцевой карман
-   C-d удалить область ("в никуда")
-   C-M-w C-w удалить и добавить в карман

-   C-x C-u преобразовать выделенное к верхнему регистру
-   C-x C-l преобразовать выделенное к нижнему регистру
-   M-c перевести слово к нижнему регистру с первой заглавной
-   C-x TAB или C-M-\\ сделать заданный отступ
-   M-x fill-region заполнить область

-   C-y вставить текст из кармана (yank)
-   M-y восстановить текст из предыдущего кармана (после применения C-y)


<a id="org3c088d0"></a>

## Работа с прямоугольниками:

-   C-x r k вырезать прямоугольник в карман
-   C-x r d удалить прямоугольник в карман
-   C-x r y вставить прямоугольник из кармана
-   C-x r o вставить прямоугольник заполненный пробелами
-   M-x clear-rectangle очистить прямоугольник и заполнить пробелами
-   C-x r t вставить строку в каждую строку области-прямоугольника


<a id="orgcbde593"></a>

## Работа с регистрами:

-   M-x view-register выдать описание содержимого регистра

-   C-x r SPC {R} записать положение точки в регистр {R}
-   C-x r j {R} перейти в позицию записанную в регистре {R}

-   C-x r s {R} копировать область в регистр {R} (copy-to-register)
-   C-x r r {R} копировать область-прямоугольник в регистр {R}
-   C-x r i {R} вставить текст из регистра (insert-register)


<a id="org51be262"></a>

## Работа с закладками:

-   C-x r m заложить закладку
-   C-x r b перейти к закладке
-   C-x r l перечислить все закладки
-   M-x bookmark-save сохранить все закладки в файл закладок


<a id="orga32438e"></a>

## Поиск и замена:

-   C-s прямой поиск
-   C-r обратный поиск
-   ESC C-s прямой поиск по регулярному выражению
-   ESC C-r обратный поиск по регулярному выражению
-   M-% замена с подтверждением (M-x query-replace)
-   M-x query-replace-regexp замена по регул. выражению с подтверждением  
    В процессе поиска:
    -   BSP вернуться
    -   C-g прервать


<a id="org311505e"></a>

## Отмена:

-   C-x u или C-\_ или C-/ отмена последней операции (undo)
-   C-u C-x u отменить одну группу изменений в области
-   M-x advertised-undo ???
-   Замечание:
    -   У меня C-\_ не работает, но работает C-/, что очень удобно.
    -   Для "Redo" можо нажать пробел и "отменять отмену".


<a id="orgf8f9d21"></a>

## Повторить команду:

-   C-x z (repeat)  
    Примечание: кнопку z можно нажимать столько раз сколько нужно повторов
-   C-x ESC ESC повторить команду выполненную в минибуфере (M-x &#x2026;)


<a id="org0a38b9e"></a>

## Форматирование:

-   M-q или M-x fill-paragraph выравнять абзац по левой границе
-   M-1 M-q выронить абзац по ширине
-   M-x fill-region выравнять выделенную область по левой границе
-   M-1 M-x fill-region выравнять выделенную область по ширине
-   C-u N C-x TAB изменить отступ у выделенной области на N

-   C-u 72 C-x f установить ширину в 72 символов (set-fill-column)

-   M-x auto-fill-mode авто-заполнение
-   M-x set-variable indent-tabs-mode nil выравнивание делать пробелами
-   M-x tabify свернуть все пробелы в табуляторы
-   M-x untabify развернуть все табуляторы в пробелы


<a id="org87e3ffd"></a>

## Проверка орфографии:

-   M-x ispell-change-dictionary выбрать словарь
-   M-x ispell-buffer проверить весь буфер
-   M-x ispell-region проверить выделенный текст
-   M-$ проверить текущее слово
-   M-x flyspell-mode режим выделения ошибок "на лету"


<a id="org65e4170"></a>

## Работа с комментариями:

-   M-; вставить или выровнять комментарий в текущей строке
-   C-x ; установить столбец комментария ???
-   C-u - C-x ; уничтожить комментарий в текущей строке
-   C-M-j перевести строку и начать с комментария
-   M-x comment-region закоментировать область


<a id="org91fbfd1"></a>

## Работа с символами табуляции:

-   M-x tabify преобразовать пробелы в табуляцию
-   M-x untabify преобразовать символы табуляции в пробелы


<a id="org426ffa6"></a>

## Работа с файлами тегов:

-   etags входные\_файлы&#x2026; создать таблицу тегов (в shell)
-   M-x visit-tags-table выбрать таблицу тегов
-   M-. найти первое определение тега
-   C-u M-. найти следующее определение тега
-   C-u - M-. найти предыдущее определение тега
-   M-\*\* вернуться назад


<a id="org9f7b131"></a>

## Макрокоманды:

-   С-u n или M-n выполнять команду n раз
-   M-x функция выполнить функцию по имени
-   M-x set-variable установить переменную
-   M-x global-set-key назначить на клавишу функцию

-   C-x ( .. C-x) назначить макрокоманду
-   C-x e выполнить макрокоманду

-   M-x name-last-kbd-macro присвоить имя макрокоманде
-   M-x insert-last-kbd-makro воспроизвести клавиши LISP кода
-   M-x insert-kbd-makro вставить lisp-код по функции.
-   M-x M-x disassemble дизассемблировать функцию

-   C-x ESC повторить последнюю команду минибуфера (repeat-coomplex-command)

-   M-x list-command-history листать команды минибуфера


<a id="orgd4f166b"></a>

## Запуск внешних программ и надстроек:

-   ESC ! выполнить одну команду shell
-   M-x shell запуск shell
-   M-x ansi-term запуск встроенного эмулятора терминала
-   M-x calendar календарь
-   M-x man просмотр man
-   M-x info просмотр страниц texinfo
-   M-x tetris тетрис
-   M-x compile запуск make
-   M-x grep запуск grep
-   M-x grep-find запуса find и grep в паре через канал
-   M-x gdb запуск GDB
-   M-x pdb запуск PDB (для Python)
-   M-x w3m запуск браузера (если установлен пакет w3m-el)


<a id="orga084b49"></a>

## Подсветка последних изменений:

-   M-x highlight-changes-mode


<a id="org9ad23a6"></a>

## Кодировки:

-   M-x list-coding-system выводит список кодировок
-   M-x describe-coding-system описание кодировки
-   C-x RET f - задать кодировку для сохранения буфера
-   C-x RET c - задать кодировку перед считыванием
-   C-x RET k|t|p|x|X см. справку по C-h c или C-h k
-   C-x Ret r - revert-buffer-with-coding-system - обновить буфер с указанной кодировкой (по факту, перечитать файл с указанной кодировкой). Кажется, самая часто используемая мной из всех тут.


<a id="orga094932"></a>

## Работа с переменными:

-   C-h v справка по переменной
-   M-x set-variable установить значение переменной (setq var value)


<a id="orgb483bf4"></a>

## Настройка Emacs:

-   M-x customize запуск конфигуратора


<a id="orgbf5bfb6"></a>

## нумерация строк

-   M-x display-line-numbers-mode


<a id="orgb8c959a"></a>

# Про всякие символы     :info:

Выжимка из <http://xahlee.org/emacs/keystroke_rep.html>

-   To insert a literal tab char, press 【Ctrl+q Tab】.
-   To type a newline char, type 【Ctrl+q Ctrl+j】.
-   【Ctrl+q】 is the keyboard shortcut to invoke the command quoted-insert, which will insert a literal character of whatever character you can type on your keyboard. So, for example, 【Ctrl+q】 followed by the Tab key will insert the non-printable character tab.

<table>


<colgroup>
<col  class="org-right">

<col  class="org-right">

<col  class="org-left">

<col  class="org-left">

<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Dec</th>
<th scope="col" class="org-right">Hex</th>
<th scope="col" class="org-left">Abbr</th>
<th scope="col" class="org-left"><code>PR†1</code></th>
<th scope="col" class="org-left"><code>CS†2</code></th>
<th scope="col" class="org-left"><code>CEC†3</code></th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td class="org-right">0</td>
<td class="org-right">00</td>
<td class="org-left">NUL</td>
<td class="org-left">␀</td>
<td class="org-left">^@</td>
<td class="org-left">\0</td>
<td class="org-left">Null character</td>
</tr>


<tr>
<td class="org-right">1</td>
<td class="org-right">01</td>
<td class="org-left">SOH</td>
<td class="org-left">␁</td>
<td class="org-left">^A</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Start of Header</td>
</tr>


<tr>
<td class="org-right">2</td>
<td class="org-right">02</td>
<td class="org-left">STX</td>
<td class="org-left">␂</td>
<td class="org-left">^B</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Start of Text</td>
</tr>


<tr>
<td class="org-right">3</td>
<td class="org-right">03</td>
<td class="org-left">ETX</td>
<td class="org-left">␃</td>
<td class="org-left">^C</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">End of Text</td>
</tr>


<tr>
<td class="org-right">4</td>
<td class="org-right">04</td>
<td class="org-left">EOT</td>
<td class="org-left">␄</td>
<td class="org-left">^D</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">End of Transmission</td>
</tr>


<tr>
<td class="org-right">5</td>
<td class="org-right">05</td>
<td class="org-left">ENQ</td>
<td class="org-left">␅</td>
<td class="org-left">^E</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Enquiry</td>
</tr>


<tr>
<td class="org-right">6</td>
<td class="org-right">06</td>
<td class="org-left">ACK</td>
<td class="org-left">␆</td>
<td class="org-left">^F</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Acknowledgment</td>
</tr>


<tr>
<td class="org-right">7</td>
<td class="org-right">07</td>
<td class="org-left">BEL</td>
<td class="org-left">␇</td>
<td class="org-left">^G</td>
<td class="org-left">\a</td>
<td class="org-left">Bell</td>
</tr>


<tr>
<td class="org-right">8</td>
<td class="org-right">08</td>
<td class="org-left">BS</td>
<td class="org-left">␈</td>
<td class="org-left">^H</td>
<td class="org-left">\b</td>
<td class="org-left">Backspace</td>
</tr>


<tr>
<td class="org-right">9</td>
<td class="org-right">09</td>
<td class="org-left">HT</td>
<td class="org-left">␉</td>
<td class="org-left">^I</td>
<td class="org-left">\t</td>
<td class="org-left">Horizontal Tab</td>
</tr>


<tr>
<td class="org-right">10</td>
<td class="org-right">0A</td>
<td class="org-left">LF</td>
<td class="org-left">␊</td>
<td class="org-left">^J</td>
<td class="org-left">\n</td>
<td class="org-left">Line feed</td>
</tr>


<tr>
<td class="org-right">11</td>
<td class="org-right">0B</td>
<td class="org-left">VT</td>
<td class="org-left">␋</td>
<td class="org-left">^K</td>
<td class="org-left">\v</td>
<td class="org-left">Vertical Tab</td>
</tr>


<tr>
<td class="org-right">12</td>
<td class="org-right">0C</td>
<td class="org-left">FF</td>
<td class="org-left">␌</td>
<td class="org-left">^L</td>
<td class="org-left">\f</td>
<td class="org-left">Form feed</td>
</tr>


<tr>
<td class="org-right">13</td>
<td class="org-right">0D</td>
<td class="org-left">CR</td>
<td class="org-left">␍</td>
<td class="org-left">^M</td>
<td class="org-left">\r</td>
<td class="org-left">Carriage return</td>
</tr>


<tr>
<td class="org-right">14</td>
<td class="org-right">0E</td>
<td class="org-left">SO</td>
<td class="org-left">␎</td>
<td class="org-left">^N</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Shift Out</td>
</tr>


<tr>
<td class="org-right">15</td>
<td class="org-right">0F</td>
<td class="org-left">SI</td>
<td class="org-left">␏</td>
<td class="org-left">^O</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Shift In</td>
</tr>


<tr>
<td class="org-right">16</td>
<td class="org-right">10</td>
<td class="org-left">DLE</td>
<td class="org-left">␐</td>
<td class="org-left">^P</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Data Link Escape</td>
</tr>


<tr>
<td class="org-right">17</td>
<td class="org-right">11</td>
<td class="org-left">DC1</td>
<td class="org-left">␑</td>
<td class="org-left">^Q</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Device Control 1 (oft. XON)</td>
</tr>


<tr>
<td class="org-right">18</td>
<td class="org-right">12</td>
<td class="org-left">DC2</td>
<td class="org-left">␒</td>
<td class="org-left">^R</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Device Control 2</td>
</tr>


<tr>
<td class="org-right">19</td>
<td class="org-right">13</td>
<td class="org-left">DC3</td>
<td class="org-left">␓</td>
<td class="org-left">^S</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Device Control 3 (oft. XOFF)</td>
</tr>


<tr>
<td class="org-right">20</td>
<td class="org-right">14</td>
<td class="org-left">DC4</td>
<td class="org-left">␔</td>
<td class="org-left">^T</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Device Control 4</td>
</tr>


<tr>
<td class="org-right">21</td>
<td class="org-right">15</td>
<td class="org-left">NAK</td>
<td class="org-left">␕</td>
<td class="org-left">^U</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Negative Acknowledgment</td>
</tr>


<tr>
<td class="org-right">22</td>
<td class="org-right">16</td>
<td class="org-left">SYN</td>
<td class="org-left">␖</td>
<td class="org-left">^V</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Synchronous Idle</td>
</tr>


<tr>
<td class="org-right">23</td>
<td class="org-right">17</td>
<td class="org-left">ETB</td>
<td class="org-left">␗</td>
<td class="org-left">^W</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">End of Trans. Block</td>
</tr>


<tr>
<td class="org-right">24</td>
<td class="org-right">18</td>
<td class="org-left">CAN</td>
<td class="org-left">␘</td>
<td class="org-left">^X</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Cancel</td>
</tr>


<tr>
<td class="org-right">25</td>
<td class="org-right">19</td>
<td class="org-left">EM</td>
<td class="org-left">␙</td>
<td class="org-left">^Y</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">End of Medium</td>
</tr>


<tr>
<td class="org-right">26</td>
<td class="org-right">1A</td>
<td class="org-left">SUB</td>
<td class="org-left">␚</td>
<td class="org-left">^Z</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Substitute</td>
</tr>


<tr>
<td class="org-right">27</td>
<td class="org-right">1B</td>
<td class="org-left">ESC</td>
<td class="org-left">␛</td>
<td class="org-left">^[</td>
<td class="org-left">\e</td>
<td class="org-left">Escape</td>
</tr>


<tr>
<td class="org-right">28</td>
<td class="org-right">1C</td>
<td class="org-left">FS</td>
<td class="org-left">␜</td>
<td class="org-left">^\</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">File Separator</td>
</tr>


<tr>
<td class="org-right">29</td>
<td class="org-right">1D</td>
<td class="org-left">GS</td>
<td class="org-left">␝</td>
<td class="org-left">^]</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Group Separator</td>
</tr>


<tr>
<td class="org-right">30</td>
<td class="org-right">1E</td>
<td class="org-left">RS</td>
<td class="org-left">␞</td>
<td class="org-left">^^</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Record Separator</td>
</tr>


<tr>
<td class="org-right">31</td>
<td class="org-right">1F</td>
<td class="org-left">US</td>
<td class="org-left">␟</td>
<td class="org-left">^_</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Unit Separator</td>
</tr>


<tr>
<td class="org-right">127</td>
<td class="org-right">7F</td>
<td class="org-left">DEL</td>
<td class="org-left">␡</td>
<td class="org-left">^?</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Delete</td>
</tr>
</tbody>

<tbody>
<tr>
<td class="org-right">Dec</td>
<td class="org-right">Hex</td>
<td class="org-left">Abbr</td>
<td class="org-left">PR†1</td>
<td class="org-left">CS†2</td>
<td class="org-left">CEC†3</td>
<td class="org-left">Description</td>
</tr>
</tbody>
</table>

-   †1 RP = Printable Representation (a glyph in unicode).
-   †2 CS = Control key sequence and or Caret Notation.
-   †3 CEC = Character Escape Codes in the C programming language. (adapted in many other langs.)


<a id="org4d19e44"></a>

## Про привязку всяких символов     :info:

(global-set-key "keystroke" 'function) - Добавление горячей клавиши
(global-unset-key "keystroke") - наоборот удалит.

    Here are examples of multiple representation for the same keystroke (tested in emacs 22):
    
     ; equivalent code for a single keystroke
     (global-set-key "b" 'cmd)
     (global-set-key [98] 'cmd)
     (global-set-key [?b] 'cmd)
     (global-set-key [(?b)] 'cmd)
     (global-set-key (kbd "b") 'cmd)
    
     ; equivalent code for a named special key: Enter
     (global-set-key "\r" 'cmd)
     (global-set-key [?\r] 'cmd)
     (global-set-key [13] 'cmd)
     (global-set-key [(13)] 'cmd)
     (global-set-key [return] 'cmd)
     (global-set-key [?\^M] 'cmd)
     (global-set-key [?\^m] 'cmd)
     (global-set-key [?\C-M] 'cmd)
     (global-set-key [?\C-m] 'cmd)
     (global-set-key [(?\C-m)] 'cmd)
     (global-set-key (kbd "RET") 'cmd)
     (global-set-key (kbd "<return>") 'cmd)
    
     ; equivalent code for binding 1 mod key + 1 letter key: Meta+b
     (global-set-key "\M-b" 'cmd)
     (global-set-key [?\M-b]  'cmd)
     (global-set-key [(meta 98)]    'cmd)
     (global-set-key [(meta b)]    'cmd)
     (global-set-key [(meta ?b)]    'cmd)
     (global-set-key (kbd "M-b") 'cmd)
    
     ; equivalent code for binding 1 mod key + 1 special key: Meta+Enter
     (global-set-key [M-return]    'cmd)
     (global-set-key [\M-return]    'cmd)
     (global-set-key [(meta return)]    'cmd)
     (global-set-key (kbd "M-<return>") 'cmd)
    
    ; equivalent code for binding Meta + cap letter key: Meta Shift b
     (global-set-key (kbd "M-B") 'cmd)
     (global-set-key "\M-\S-b" 'cmd)
     (global-set-key "\S-\M-b" 'cmd)
     (global-set-key "\M-B" 'cmd)
    
     (global-set-key [?\M-S-b] 'cmd) ; invalid-read-syntax
     (global-set-key [?\M-?\S-b] 'cmd) ; invalid-read-syntax
     (global-set-key [?\M-\S-b] 'cmd) ; compile but no effect
    
     (global-set-key [?\M-B] 'cmd)
     (global-set-key [\M-B] 'cmd) ; compile but no effect
    
     (global-set-key [(meta shift b)] 'cmd)
     (global-set-key [(shift meta b)] 'cmd)
    
     (global-set-key (kbd "M-B") 'cmd)
     (global-set-key (kbd "M-S-b") 'cmd) ; compile but no effect
    
    ; Meta + shifted symbol key.
     (global-set-key (kbd "M-@") 'cmd) ; good
     (global-set-key (kbd "M-S-2") 'cmd) ; compile but no effect


<a id="org5fe0297"></a>

# Emacs: How to Define Keyboard Shortcuts     :info:

<http://xahlee.org/emacs/keyboard_shortcuts.html>
Xah Lee, 2005, &#x2026;, 2009, 2011-02

In emacs, you can create any keyboard shortcut to any command. This page shows you how.

The act of creating a keyboard shortcut is called keybinding. For example, if you want 【Ctrl+z】 to be undo, then, place this code (global-set-key (kbd "C-z") 'undo) in your emacs init file and restart emacs. If you are experimenting, and don't want to restart emacs everytime you try to define a new shortcut, you can select the lisp code then type 【Alt+x eval-region】.

If you made some bad mistake and need to start emacs without loading your init files, you can start emacs on the command line like this: emacs -Q.


<a id="orgcf13a5e"></a>

## Examples

Here are sample code you need to place in your emacs init file for defining various key press combinations.

The Meta key is a key on some keyboards in the 1980s. (for photos, see: Keyboard Hardware's Influence on Keyboard Shortcut Design (How Emacs and vi keys came to be)) The Meta key doesn't exist in today's keyboards, but emacs remap it to PC keyboard's Alt key by default. When you see Meta mentioned in emacs, just think of it as Alt.

In the following, the “backward-char” is a example command. Replace it with the command name you want.
Single Modifier Key

Example of shortcuts with a single modifier key:

    (global-set-key (kbd "M-a") 'backward-char) ; Meta+a
    (global-set-key (kbd "C-a") 'backward-char) ; Ctrl+a

Function keys and Special keys

Example of shortcuts with a special key:

    (global-set-key (kbd "<f2>")   'backward-char)   ; F2 key
    (global-set-key (kbd "<kp-2>") 'backward-char)   ; the “2” key on the number keypad
    
    (global-set-key (kbd "<insert>") 'backward-char) ; the Ins key
    (global-set-key (kbd "<delete>") 'backward-char) ; the Del key
    
    (global-set-key (kbd "<home>") 'backward-char)
    (global-set-key (kbd "<end>") 'backward-char)
    
    (global-set-key (kbd "<next>") 'backward-char)   ; page down key
    (global-set-key (kbd "<prior>") 'backward-char)  ; page up key
    
    (global-set-key (kbd "<left>") 'backward-char)   ; ←
    (global-set-key (kbd "<right>") 'backward-char)  ; →
    (global-set-key (kbd "<up>") 'backward-char)     ; ↑
    (global-set-key (kbd "<down>") 'backward-char)   ; ↓
    
    (global-set-key (kbd "RET") 'backward-char) ; the Enter/Return key
    (global-set-key (kbd "SPC") 'backward-char) ; the Space bar key

(info "(elisp) Function Keys")
Modifier + Special Key

Example of shortcuts with a modifier key and a special key:

    (global-set-key (kbd "M-<f2>") 'backward-char) ; Meta+F2
    (global-set-key (kbd "C-<f2>") 'backward-char)  ; Ctrl+F2
    (global-set-key (kbd "S-<f2>") 'backward-char)  ; Shift+F2
    
    (global-set-key (kbd "M-<up>") 'backward-char)  ; Meta+↑
    (global-set-key (kbd "C-<up>") 'backward-char)  ; Ctrl+↑
    (global-set-key (kbd "S-<up>") 'backward-char)  ; Shift+↑

Two Modifier Keys

Example of shortcuts with 2 modifier keys pressed simultaneously, plus a letter key:

    (global-set-key (kbd "M-A") 'backward-char) ; Meta+Shift+a
    (global-set-key (kbd "C-A") 'backward-char) ; Ctrl+Shift+a
    (global-set-key (kbd "C-M-a") 'backward-char) ; Ctrl+Meta+a

Example of 2 modifier keys with a digit key:

    (global-set-key (kbd "M-@") 'backward-char)       ; Meta+Shift+2 or Meta+@
    (global-set-key (kbd "C-@") 'backward-char)       ; Ctrl+Shift+2 or Ctrl+@
    (global-set-key (kbd "C-M-2") 'backward-char)     ; Ctrl+Meta+2
    
    (global-set-key (kbd "C-S-<kp-2>") 'backward-char); Ctrl+Shift+“numberic pad 2”

Three Modifier Keys

Example of 3 modifier keys:

    (global-set-key (kbd "C-M-S-a") 'backward-char)   ; Ctrl+Meta+Shift+a
    (global-set-key (kbd "C-M-!") 'backward-char)     ; Ctrl+Meta+Shift+1 or Ctrl+Meta+!
    (global-set-key (kbd "C-M-\"") 'backward-char)    ; Ctrl+Meta+Shift+' or Ctrl+Meta+"
    (global-set-key (kbd "C-M-S-<up>") 'backward-char); Ctrl+Meta+Shift+↑

Key Sequence

Example of shortcuts with a sequence of keystrokes:

    (global-set-key (kbd "C-c a") 'backward-char)  ; Ctrl+c a
    (global-set-key (kbd "C-c SPC") 'backward-char)  ; Ctrl+c Space
    (global-set-key (kbd "C-c <f2>") 'backward-char)   ; Ctrl+c f2
    (global-set-key (kbd "C-c <up>") 'backward-char)   ; Ctrl+c ↑
    
    (global-set-key (kbd "C-c C-c <up>") 'backward-char); Ctrl+c Ctrl+c ↑

No Modifiers

A shortcut can be created without any modifier keys.

    (global-set-key (kbd "2") 'backward-char)
    (global-set-key (kbd "a") 'backward-char)
    (global-set-key (kbd "é") 'backward-char)
    (global-set-key (kbd "α") 'backward-char)
    (global-set-key (kbd "π") 'backward-char)
    (global-set-key (kbd "(") 'backward-char)
    (global-set-key (kbd "你") 'backward-char)


<a id="org22a0438"></a>

## Keys To Avoid

Emacs has its quirks. The following keys you should not redefine:

-   Keys involving the question mark symbol “?”. (due to emacs technical implementation quirk)
-   The Esc key or 【Ctrl+[】. (The Esc key is tied to 【Ctrl+[】 and Meta. Esc by itself has complicated meanings depending when it is pressed and how many times it is pressed.)
-   【Ctrl+h】 (This key combo is used for emacs help system and have a special status in emacs's key system. You should never have 【Ctrl+h】 in your shortcut, because by default that brings up help about the key sequence you've just typed.)
-   【Ctrl+m】 or 【Enter】 (These are tied together. On Apple Keyboards the main Enter is labeled Return.)
-   【Ctrl+i】 or 【Tab】 (These are tied together)
-   【Ctrl+Shift+‹letter›】. In text terminals, it cannot distinguish shifted and unshifted versions of such combination. Works fine if you always use emacs in a GUI environment.


<a id="org97a009b"></a>

## Good Key Choices

Emacs has some 7 thousand commands. By default, 800 of them has key shortcuts. All the common key spots are used. If you define your own keys without care, you may find that many major mode or minor mode override your keys, because they have priority.

By official emacs documentation (info "Key Binding Conventions") , the key space for users are the function keys F5 to F9, and 【Ctrl+c】 followed by a single letter key. This is very restrictive.

The following keys are good spots for your own definitions, and does not cause any problems in practice.

Good Keys for User Defined Keys

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Keys</th>
<th scope="col" class="org-left">Comment</th>
</tr>
</thead>

<tbody>
<tr>
<td class="org-left">F5, F6, F7, F8, F9, F11, F12</td>
<td class="org-left">Excellent</td>
</tr>


<tr>
<td class="org-left">F1, F2, F3, F4, F10</td>
<td class="org-left">Good if you don't use their defaults actions.</td>
</tr>


<tr>
<td class="org-left">【Ctrl+F1】 to 【Ctrl+F12】</td>
<td class="org-left">Excellent</td>
</tr>


<tr>
<td class="org-left">【Alt+F1】 to 【Alt+F12】</td>
<td class="org-left">Excellent</td>
</tr>


<tr>
<td class="org-left">【Shift+F1】 to 【Shift+F12】</td>
<td class="org-left">Excellent</td>
</tr>


<tr>
<td class="org-left">【Ctrl+0】 to 【Ctrl+9】, 【Alt+0】 to 【Alt+9】</td>
<td class="org-left">Good. By default, they call “digit-argument”, which is not often used.</td>
</tr>


<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

Keys on number pad, with or without a modifier	Very useful, but depending on which emacs distribution you are using, and on what operating system you are running, or terminal vs GUI, binding these keys may not work. Same thing can be said for those Insert, Delete, Home, End, Page Up, Page Down keys.


<a id="orgc086665"></a>

## Syntax Problem with Shift Key Combination

A keypress combination such as 【Meta+Shift+2】 can also be considered as 【Meta+@】. So, in emacs, you might be thinking that both of these code: (kbd "M-S-2") and (kbd "M-@") will work. Actually, only the latter will work.

When writing a keybinding definition, for a key combination that is 【Meta+Shift+‹key›】, you must use a code without the -S if possible. But for key combination that is 【Ctrl+Shift+‹key›】, you must use the -S. Examples:

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">GOOD</th>
<th scope="col" class="org-left">BAD</th>
<th scope="col" class="org-left">Keystroke</th>
</tr>
</thead>

<tbody>
<tr>
<td class="org-left">(kbd "M-A")</td>
<td class="org-left">(kbd "M-S-a")</td>
<td class="org-left">Meta+Shift+a</td>
</tr>


<tr>
<td class="org-left">(kbd "M-@")</td>
<td class="org-left">(kbd "M-S-2")</td>
<td class="org-left">Meta+Shift+2</td>
</tr>


<tr>
<td class="org-left">(kbd "M-:")</td>
<td class="org-left">(kbd "M-S-;")</td>
<td class="org-left">Meta+Shift+;</td>
</tr>


<tr>
<td class="org-left">(kbd "C-S-a")</td>
<td class="org-left">(kbd "C-A")</td>
<td class="org-left">Ctrl+Shift+a</td>
</tr>
</tbody>
</table>

A easy way to find out the proper syntax, is to call “describe-key” 【Ctrl+h k】, then type the keystroke.

Note also, that keys involving 【Ctrl+Shift+‹key›】 cannot be distinguished from 【Ctrl+‹key›】 when emacs runs in a text terminal (telnet/ssh).

Example of shortcut with a punctuation key that are typed with Shift:

    (global-set-key (kbd "C-:") 'backward-char) ; Ctrl+Shift+; or Ctrl+:
    (global-set-key (kbd "C-\"") 'backward-char) ; Ctrl+Shift+' or Ctrl+"
    ; note: the question mark “?” cannot be used in shortcut.

Example of 2 modifier keys with a special key:

    (global-set-key (kbd "M-S-<f1>") 'backward-char)   ; Meta+Shift+F1
    (global-set-key (kbd "C-S-<kp-2>") 'backward-char) ; Ctrl+Shift+“numberic pad 2”
    (global-set-key (kbd "C-M-<up>") 'backward-char)   ; Ctrl+Meta+↑


<a id="orgd015012"></a>

## Order of Modifier Keys in Syntax

When there are more than one modifier keys, such as (kbd "C-M-a") 【Ctrl+Alt+a】, the order of the modifier in the string does not matter. It is recommended that they be alphabetical. So, use “C-M-a”, not “M-C-a”.
Hyper and Super Keys

Emacs supports extra modifier keys called Super and Hyper. On a PC keyboard, you can set the Win key or Menu key to them, or Apple keyboard's Opt or Cmd key. See: Emacs: How to define Hyper ＆ Super Keys.


<a id="org06294d2"></a>

## Common Questions


<a id="orgcb6f2a1"></a>

### How to unset a keybinding?

To unset a keybinding, use “global-unset-key”. For example, you have defined a keystroke for undo, and wants to kick the habit of the hitting the default shortcut for undo:

    (global-unset-key (kbd "C-_"))


<a id="orgef2572c"></a>

### How to find out the current keybinding to a key?

Type 【Ctrl+h k】 (describe-key), then type the key combination. Emacs will then show the function that key press is bound to.

To see a list of ALL current keybindings, type 【Ctrl+h b】 (describe-bindings).


<a id="org7db3665"></a>

### How to find out the syntax for a particular key combination?

Call “describe-key” 【Ctrl+h k】, then press the key combination. Emacs will then display its syntax. For example, suppose you want to know the syntax for the key press of 【Ctrl+Alt+F8】. Call “describe-key”, then press 【Ctrl+Alt+F8】, then emacs will print “<C-M-f8> is undefined”. That means, you can use (kbd "<C-M-f8>") to represent that key combination in lisp code.

Note: There is a lot syntax variations, but the one printed by “describe-key” is guaranteed to work. For details of emacs's keystroke syntax variation, see: Emacs's Key Notations Explained (/r, ^M, C-m, RET, <return>, M-, meta).


<a id="orgf26b49b"></a>

### How to have a keyboard shortcut set only when a particular mode is active?

Use a hook for the mode. A hook will load your code whenever that mode is activated. Here's a usable example:

    ; define some keys only when the major mode html-mode is active
    (add-hook 'html-mode-hook
     (lambda ()
     (local-set-key (kbd "C-c w") 'bold-word)
     (local-set-key (kbd "C-c b") 'blue-word)
     (local-set-key (kbd "C-c p") 'insert-p)
     (local-set-key (kbd "M-4") 'tag-image)
     (local-set-key (kbd "M-5") 'wrap-url)
     )
    )

(info "(emacs) Hooks")


<a id="org488751b"></a>

### How to change major mode or minor mode's keys?

See: How to Override Keybindings in Emacs.

References and Further Readings

-   (info "(emacs) Key Bindings")
-   (info "(elisp) Keymaps")

