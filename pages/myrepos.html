----
title: Myrepos - для ленивых любителей git и прочих vcs
----


<div id="TOC">
<ul>
<li><a href="#myrepos">Myrepos - для ленивых любителей git и прочих vcs</a></li>
</ul>
</div>

<p>Про то, что git я нежно люблю, хотя и использую ничтожную долю от его возможностей, я точно уже писала, но могу повторять снова и снова. Дивно удобная штука.</p>
<p>Поэтому репозиториев git у меня на компе становится всё больше и больше. Уже больше двадцати, и это не предел, я так предчувствую. Часть - тексты. Часть - конфиги. Часть - полезные штуки, которые удобнее всего скачивать и обновлять именно через git. Лежат, разумеется, в разных местах, в зависимости от того, что это и зачем. И вручную пинать все бывает просто лень. )</p>
<p>Вот поэтому я поставила себе myrepos.</p>
<p>Мне, как обычно, проще всего ставить из репозитория дебиана: <code>aptitude install myrepos</code>. Но автор предлагает также вариант <code>git clone git://myrepos.branchable.com/ myrepos</code> или брать с <a href="https://github.com/joeyh/myrepos" class="uri">https://github.com/joeyh/myrepos</a>. По желанию.</p>
<p>Потом зайти в те репозитории, которые уже надоело пинать вручную и скомандовать <code>mr register</code>. И в файлике <code>~/.mrconfig</code> появятся записи об этих репозиториях. Можно и это вручную, конечно. Как кому кажется легче. :)</p>
<p>Теперь можно запустить, скажем, <code>mr status</code> и посмотреть, что получится, все ли отозвались. Заметим, кое-что зависит от того, где запускать. Mr будет трогать только известные ему репозитории в каталоге, откуда запущен, и его подкаталогах. Вверх не полезет. И это сильно упрощает общение с группами репозиториев. Таким способом можно делать довольно много - массово коммитить, стягивать обновления и что там бишь ещё.</p>
<p>Недавно сделала себе милое усовершенствование. Прежде, чем пытаться отправлять что-то куда-то, просто спросить git, как он считает, есть ли, что. Гораздо меньше мороки при отправке пачкой.</p>
<pre><code>push = LC_ALL=C git status | grep -q 'is ahead' &amp;&amp; git push || echo 'up-to-date'</code></pre>
<p>Часть репозиториев у меня личные, шлю туда только я, обновлений помимо моих там не будет. Соответственно, на команду <code>fetch</code> и <code>update</code> (то бишь, стянуть свежее) у меня стоит <code>echo моё, пропускаем</code>.</p>
<p>Часто использую <code>mr status</code> - посмотреть, всё ли закоммичено. <code>mr diff</code> - соответственно, посмотреть диффы. Первое использую часто, второе, кажется, ни разу.</p>
<p><code>mr checkout</code> для меня, похоже, не имеет смысла. <code>mr clean</code> показывает файлы, которые не под контролем в репозитории. С ключиком <code>-f</code> может их и удалить. Но мне, как правило, такое не надо. Даже поштучно. <code>mr commit</code> - массовый коммит и пуш. <code>mr record</code> - просто массовый коммит. С ключиком <code>-m</code> - указывается комментарий. Тож пока ни разу не. <code>mr log</code> - покажет лог коммитов. <code>mr grep pattern</code> - потенциально полезно, реально запускаю поиски через projectile. <code>mr run command</code> - позволяет в каждом репозитории выполнить команду... тож пока ни разу. <code>mr list</code> - список репозиториев, в которых mr будет действовать. <code>mr config</code> - смотреть и менять конфиг из командной строки. <code>mr offline</code> - сказать, что мы в офлайне, что не получится сделать, надо запомнить до онлайна. <code>mr remember</code> - запомнить команду до онлайна (заодно говорит mr, что мы в офлайне), но даже не пытаться делать, <code>mr online</code> - воспользоваться случаем и доделать, что в офлайне не получалось. <code>mr help</code> - ясно, справка.</p>
